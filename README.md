# 上大洗衣侠 - 洗衣机预约小程序

## 项目简介

上大洗衣侠是一款专为上海大学学生设计的洗衣机预约管理小程序，旨在解决宿舍楼共用洗衣机资源紧张、排队难、状态不透明等问题。通过技术手段优化公共资源使用效率，提升学生生活质量。

## 功能特性

### 核心功能
- ✅ **微信授权登录** - 一键登录，免去注册流程
- ✅ **智能楼栋识别** - 基于位置信息自动识别所在楼栋
- ✅ **实时状态展示** - 可视化显示洗衣机使用状态
- ✅ **智能预约系统** - 支持立即预约和时段预约
- ✅ **消息提醒系统** - 预约成功、设备就绪等消息推送
- ✅ **信用积分体系** - 基于使用行为的信用管理

### 页面结构
- **首页** - 欢迎界面、快速操作、状态概览
- **楼栋选择** - 楼栋列表、地图模式、收藏功能
- **预约管理** - 预约创建、历史记录、使用统计
- **个人中心** - 用户信息、信用积分、设置选项
- **消息中心** - 系统通知、预约提醒
- **信用中心** - 积分规则、等级特权
- **帮助中心** - 使用指南、常见问题

## 技术架构

### 前端技术栈
- **微信小程序原生框架** - 使用微信小程序原生开发
- **WeUI组件库** - 提供统一的UI组件
- **腾讯地图SDK** - 集成地图功能（预留）
- **微信云开发** - 后端服务（预留）

### 项目结构
```
├── app.js                 # 小程序入口文件
├── app.json              # 全局配置
├── app.wxss              # 全局样式
├── sitemap.json          # 站点地图
├── project.config.json   # 项目配置
├── pages/                # 页面目录
│   ├── index/            # 首页
│   ├── login/            # 登录页
│   ├── building/         # 楼栋选择
│   ├── booking/          # 预约管理
│   ├── booking-detail/   # 预约详情
│   ├── profile/          # 个人中心
│   ├── message/          # 消息中心
│   ├── credit/           # 信用中心
│   └── help/             # 帮助中心
├── utils/                # 工具函数
│   ├── util.js           # 通用工具
│   └── api.js            # API封装
└── images/               # 图片资源
```

## 快速开始

### 环境要求
- 微信开发者工具
- Node.js 12.0+
- 微信小程序账号

### 安装步骤

1. **克隆项目**
   ```bash
   git clone [项目地址]
   cd 洗衣机预约
   ```

2. **配置小程序**
   - 在微信公众平台注册小程序账号
   - 获取AppID
   - 修改 `project.config.json` 中的 `appid` 字段

3. **导入项目**
   - 打开微信开发者工具
   - 选择"导入项目"
   - 选择项目目录
   - 填入AppID

4. **运行项目**
   - 点击"编译"按钮
   - 在模拟器中预览效果

### 配置说明

#### 1. 修改API地址
在 `app.js` 中修改 `apiBaseUrl`：
```javascript
globalData: {
  apiBaseUrl: 'https://your-api-domain.com/api'
}
```

#### 2. 配置位置服务
在 `app.json` 中已配置位置权限：
```json
"permission": {
  "scope.userLocation": {
    "desc": "您的位置信息将用于自动识别所在楼栋"
  }
}
```

## 功能说明

### 用户系统
- 微信一键登录
- 用户信息管理（学号、楼栋、房间号）
- 信用积分展示

### 楼栋管理
- 自动定位识别楼栋
- 手动切换楼栋
- 收藏常用楼栋
- 地图模式查看

### 预约系统
- 实时查看洗衣机状态
- 立即预约空闲设备
- 时段预约功能
- 预约历史记录

### 信用体系
- 积分规则：按时使用+2分，超时-5分等
- 等级划分：青铜、白银、黄金、钻石
- 特权功能：不同等级享受不同权限

## 数据模拟

项目使用模拟数据，主要数据结构：

### 用户信息
```javascript
{
  openid: "用户openid",
  nickName: "用户昵称",
  avatarUrl: "头像URL",
  studentId: "学号",
  buildingId: "楼栋ID",
  buildingName: "楼栋名称",
  roomNumber: "房间号",
  phone: "手机号",
  creditScore: 100,
  level: "青铜"
}
```

### 楼栋信息
```javascript
{
  id: 1,
  name: "东区1号楼",
  floors: 6,
  washerCount: 12,
  idleCount: 8,
  workingCount: 4,
  latitude: 31.2756,
  longitude: 121.5000
}
```

### 洗衣机信息
```javascript
{
  id: 1,
  name: "洗衣机1",
  location: "1楼洗衣房",
  status: "idle", // idle, booking, working, ready, fault
  statusText: "空闲",
  remainingTime: "剩余时间"
}
```

## 开发指南

### 添加新页面
1. 在 `pages` 目录下创建新文件夹
2. 创建 `.wxml`、`.wxss`、`.js`、`.json` 四个文件
3. 在 `app.json` 的 `pages` 数组中添加页面路径

### 修改样式
- 全局样式在 `app.wxss` 中定义
- 页面样式在各页面的 `.wxss` 文件中定义
- 使用rpx单位适配不同屏幕

### API调用
使用 `utils/api.js` 中封装的API方法：
```javascript
const { userApi } = require('../../utils/api')

// 调用API
userApi.getUserInfo().then(res => {
  console.log(res)
})
```

## 部署说明

### 小程序发布
1. 在微信开发者工具中点击"上传"
2. 填写版本号和项目备注
3. 在微信公众平台提交审核
4. 审核通过后发布上线

### 注意事项
- 确保所有功能测试通过
- 检查权限配置是否正确
- 确认API地址可访问
- 测试不同设备兼容性

## 后续开发

### 待实现功能
- [ ] 后端API接口开发
- [ ] 数据库设计和实现
- [ ] 消息推送服务
- [ ] 管理后台系统
- [ ] 数据统计分析
- [ ] 智能推荐算法

### 优化方向
- [ ] 性能优化
- [ ] 用户体验提升
- [ ] 界面美化
- [ ] 功能完善

## 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 联系方式

- 项目地址：[GitHub链接]
- 问题反馈：[Issues链接]
- 邮箱：service@shu.edu.cn

---

**开发团队**: 上海大学计算机学院JAVA小组  
**项目版本**: v1.0.0  
**最后更新**: 2025年10月

