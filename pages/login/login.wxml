<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- 顶部Logo区域 -->
  <view class="logo-section">
    <view class="logo-icon">🧺</view>
    <text class="app-name">上大洗衣侠</text>
    <text class="app-slogan">让洗衣更简单，让生活更美好</text>
  </view>

  <!-- 登录表单区域 -->
  <view class="login-form">
    <view class="form-title">欢迎使用</view>
    <view class="form-subtitle">请完善您的个人信息</view>

    <!-- 用户信息表单 -->
    <view class="form-content" wx:if="{{!isWechatLogin}}">
      <view class="form-item">
        <view class="form-label">学号</view>
        <input class="form-input" type="text" placeholder="请输入学号" value="{{formData.studentId}}" bindinput="onStudentIdInput" />
      </view>
      
      <view class="form-item">
        <view class="form-label">楼栋</view>
        <picker class="form-picker" mode="selector" range="{{buildingList}}" range-key="name" value="{{buildingIndex}}" bindchange="onBuildingChange">
          <view class="picker-content">
            <text class="picker-text">{{buildingList[buildingIndex] ? buildingList[buildingIndex].name : '请选择楼栋'}}</text>
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>
      
      <view class="form-item">
        <view class="form-label">房间号</view>
        <input class="form-input" type="text" placeholder="请输入房间号" value="{{formData.roomNumber}}" bindinput="onRoomNumberInput" />
      </view>
      
      <view class="form-item">
        <view class="form-label">手机号</view>
        <input class="form-input" type="number" placeholder="请输入手机号" value="{{formData.phone}}" bindinput="onPhoneInput" />
      </view>
    </view>

    <!-- 微信登录按钮 -->
    <view class="login-buttons">
      <button class="wechat-login-btn" open-type="getUserInfo" bindgetuserinfo="onWechatLogin" wx:if="{{!isWechatLogin}}">
        <view class="btn-icon">👤</view>
        <text class="btn-text">微信一键登录</text>
      </button>
      
      <button class="complete-btn" bindtap="completeInfo" wx:if="{{isWechatLogin && !isInfoComplete}}">
        <text class="btn-text">完善信息</text>
      </button>
      
      <button class="start-btn" bindtap="startUsing" wx:if="{{isInfoComplete}}">
        <text class="btn-text">开始使用</text>
      </button>
    </view>
  </view>

  <!-- 用户协议 -->
  <view class="agreement-section">
    <view class="agreement-item" bindtap="toggleAgreement">
      <view class="checkbox {{agreed ? 'checked' : ''}}">
        <text class="checkbox-icon" wx:if="{{agreed}}">✓</text>
      </view>
      <text class="agreement-text">我已阅读并同意</text>
      <text class="agreement-link" bindtap="viewUserAgreement">《用户协议》</text>
      <text class="agreement-text">和</text>
      <text class="agreement-link" bindtap="viewPrivacyPolicy">《隐私政策》</text>
    </view>
  </view>

  <!-- 功能介绍 -->
  <view class="features-section">
    <view class="features-title">功能特色</view>
    <view class="features-list">
      <view class="feature-item">
        <view class="feature-icon">📱</view>
        <text class="feature-text">实时状态查看</text>
      </view>
      <view class="feature-item">
        <view class="feature-icon">⏰</view>
        <text class="feature-text">智能预约提醒</text>
      </view>
      <view class="feature-item">
        <view class="feature-icon">🏆</view>
        <text class="feature-text">信用积分体系</text>
      </view>
      <view class="feature-item">
        <view class="feature-icon">🤖</view>
        <text class="feature-text">AI智能推荐</text>
      </view>
    </view>
  </view>
</view>

<!-- 加载状态 -->
<view class="loading-overlay" wx:if="{{loading}}">
  <view class="loading-content">
    <view class="loading-spinner"></view>
    <text class="loading-text">{{loadingText}}</text>
  </view>
</view>
