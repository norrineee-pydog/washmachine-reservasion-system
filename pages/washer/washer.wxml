<!--pages/washer/washer.wxml-->
<view class="container">
  <!-- æ¥¼æ ‹/æ¥¼å±‚å¤´éƒ¨ -->
  <view class="header">
    <view class="building-info">
      <text class="building-name">{{building.name}}</text>
      <picker class="floor-picker" mode="selector" range="{{floorOptions}}" value="{{floorIndex}}" bindchange="onFloorChange">
        <view class="picker-inner">
          <text class="picker-text">{{floorOptions[floorIndex]}}</text>
          <text class="picker-arrow">></text>
        </view>
      </picker>
    </view>
    <view class="summary">
      <text class="sum-item idle">ç©ºé—² {{summary.idle}}</text>
      <text class="sum-item working">ä½¿ç”¨ä¸­ {{summary.working}}</text>
      <text class="sum-item booking">é¢„çº¦ä¸­ {{summary.booking}}</text>
      <text class="sum-item ready">å¾…å–è¡£ {{summary.ready}}</text>
    </view>
  </view>

  <!-- è¿‡æ»¤ä¸æ’åº -->
  <view class="toolbar">
    <scroll-view class="chips" scroll-x>
      <view class="chip {{filterStatus==='all'?'active':''}}" data-status="all" bindtap="onFilterStatus">å…¨éƒ¨</view>
      <view class="chip {{filterStatus==='idle'?'active':''}}" data-status="idle" bindtap="onFilterStatus">ç©ºé—²</view>
      <view class="chip {{filterStatus==='working'?'active':''}}" data-status="working" bindtap="onFilterStatus">ä½¿ç”¨ä¸­</view>
      <view class="chip {{filterStatus==='booking'?'active':''}}" data-status="booking" bindtap="onFilterStatus">é¢„çº¦ä¸­</view>
      <view class="chip {{filterStatus==='ready'?'active':''}}" data-status="ready" bindtap="onFilterStatus">å¾…å–è¡£</view>
    </scroll-view>
    <view class="sort" bindtap="toggleSort">
      <text class="sort-text">æŒ‰å¯ç”¨æ—¶é—´{{sortAsc?'â†‘':'â†“'}}</text>
    </view>
  </view>

  <!-- æ´—è¡£æœºç½‘æ ¼ -->
  <view class="grid">
    <view class="card" wx:for="{{displayWashers}}" wx:key="id" bindtap="onSelectWasher" data-washer="{{item}}">
      <view class="card-top">
        <text class="card-name">{{item.name}}</text>
        <text class="status-tag status-{{item.status}}">{{item.statusText}}</text>
      </view>
      <view class="card-middle">
        <text class="location">{{item.location}}</text>
        <text class="remain" wx:if="{{item.remainingTime}}">{{item.remainingTime}}</text>
      </view>
      <view class="card-actions">
        <view class="btn primary" wx:if="{{item.status==='idle'}}">é¢„çº¦</view>
        <view class="btn disabled" wx:else>ä¸å¯ç”¨</view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{displayWashers.length===0}}">
    <view class="empty-icon">ğŸ§º</view>
    <text class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„è®¾å¤‡</text>
  </view>
</view>

